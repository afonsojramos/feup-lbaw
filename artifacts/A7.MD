# A7: High-level architecture. Privileges. Web resources specification
 
## 1. Overview

In this section the overview of the application to implement and it's division and description of the modules are presented. Further information about modules such as associated web resources are detailed in the individual documentation of each module.

<table>
	<tr>
		<th>M01:Authentication</th>
		<td>Web resources associated with user authentication, includes the following system features: login/logout, registration.
</td>
	</tr>
	<tr>
		<th>M02:User Profile</th>
		<td>Web resources associated with user individual profile management and view, includes the following system features: public profile view, password recovery, view and edit personal profile information, view and edit personal photograph.
</td>
	</tr>
	<tr>
		<th>M03:Posts</th>
		<td>Web resources associated with posts, includes the following system features: create, edit and delete posts as well as vote and search for posts.</td>
	</tr>
    <tr>
		<th>M04:University Faculty Administration</th>
		<td>Web resources associated with University and Faculty Administration, including the following system features: adding, editing and deleting both faculties, universities and cities.</td>
	</tr>
    <tr>
		<th>M05:User Administration</th>
		<td>Web resources associated with user administration, includes the following system features: show all users, show a specific user, block/unblock a specific user and delete it's posts, comments and avatar.</td>
	</tr>
    <tr>
		<th>M06:Static Pages</th>
		<td>Web resources associated with static content, includes the following system features: about, contact, statistics, faq, and custom error apges (404 and 403).
</td>
	</tr>
    <tr>
		<th>M07:Comments</th>
		<td>Web resources associated with comments, includes the following system features: create comment, edit comment and delete comment.</td>
	</tr>
    <tr>
		<th>M08:Flags</th>
		<td>Web resources associated with flags, includes the following system features (for both users, comments and posts): create flags, archive flags and delete flags.</td>
	</tr>
</table>

## 2. Permissions
 
In this section the permissions to be used in each module are defined in order to establish conditions of access to resources.

 
 <table>
	<tr>
		<th>PUB</th>
		<td>Public</td>
        <td>Group of Visitors without privileges</td>
	</tr>
    <tr>
		<th>USR</th>
		<td>User</td>
        <td>Authenticated User</td>
	</tr>
	<tr>
		<th>OWN</th>
		<td>Owner</td>
        <td>Group of Users that can update it's own profile, posts and comments. This type of permission means that there must always be a Session Variable that holds the <code>user_id</code> or equivalent unique identifier for the currently logged in user.</td>
	</tr>
	<tr>
		<th>ADM</th>
		<td>Administrator</td>
        <td>Group of Administrators</td>
	</tr>
</table>
 
## 3. Modules
 
### Module M01: Authentication

These are the endpoints available in the Authentication Module.

* **R101: Login Action** `/login`
* **R102: Register Action** `/register`
* **R103: Logout Action** `/logout`
* **R104: Password recovery Form** `/password/reset`
* **R105: Password recovery Action** `/password/reset/{token}`
    

#### R101: Login Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/login</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource logs the user into the system.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan=2>Request Body</th>
		<td>+login_username_email: string</td>
        <td>The user's username or email.</td>
	</tr>
    <tr>
		<td>+login_pass: string</td>
        <td>The user's password.</td>
	</tr>
    <tr>
		<th rowspan=2>Redirects</th>
		<td><a href="#R608-Homepage-Authenticated-Feed">R608</a></td>
        <td>Sucess.</td>
	</tr>
    <tr>
        <td><a href="R607-Homepage">R607</a></td>
        <td>Errors.</td>
    </tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R102: Register Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/register</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource registers the user into the system.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan=4>Request Body</th>
		<td>?signup_name: string</td>
        <td>The user's name.</td>
	</tr>
    <tr>
		<td>+signup_email: string</td>
        <td>The user's email.</td>
	</tr>
	    <tr>
		<td>+signup_username: string</td>
        <td>The user's username.</td>
	</tr>
	    <tr>
		<td>+signup_password: string</td>
        <td>The user's password.</td>
	</tr>
    <tr>
		<th rowspan=2>Redirects</th>
		<td><a href="#R608-Homepage-Authenticated-Feed">R608</a></td>
        <td>Sucess.</td>
	</tr>
    <tr>
        <td><a href="R607-Homepage">R607</a></td>
        <td>Errors.</td>
    </tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>


#### R103: Logout Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/logout</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource logs the user out of the system.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
    <tr>
		<th rowspan=1>Redirects</th>
		<td><a href="#R607-Homepage">R607</a></td>
        <td>Always.</td>
	</tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R104: Password Recovery Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/password/reset</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2"> Page with a form to request a token to reset the password.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th rowspan=1>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/recover-password.html">UI08</a></td>
	</tr>
    <tr>
		<th rowspan=1>Submit</th>
        <td colspan="2"><a href="#R105-Password-Recovery-Action">R105</a></td>
	</tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R105: Password Recovery Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/password/reset/{token}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource sends a reset password link to the passed email.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+token:string</td>
        <td>the token for resetting the password</td>
	</tr>
	<tr>
		<th rowspan=2>Request Body</th>
		<td>+email: string</td>
        <td>The user's email.</td>
	</tr>
	<tr>
		<td>+password: string</td>
        <td>The user's new password.</td>
	</tr>
    <tr>
		<th rowspan=2>Redirects</th>
		<td><a href="#R607-Homepage">R607</a></td>
        <td>email sent or no action happened (even if user is not found (prevents email targeting)).</td>
	</tr>
	<tr>
		<td><a href="#R104-Password-Recovery-Form">R104</a></td>
        <td>error.</td>
	</tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

 
### Module M02: User Profile

These are the endpoints available in the User Profile Module.

* **R201: View Profile** `/user/{username}`
* **R202: Edit Profile Form** `/user/edit`
* **R203: Edit Profile Action** `/user/edit`
* **R204: View Profile Picture** `/user/{username}/photo`
* **R205: Edit Profile Picture** `/user/photo`
* **R206: Edit Password Form** `/user/password`
* **R207: Edit Password Action** `/api/user/password`

#### R201: View Profile

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/{username}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Display the individual user profile with personal information and contributions to the platform</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+username:string</td>
        <td>the user (unique) username</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/user-profile.html">UI09</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R202: Edit Profile Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form, filled with the user details, editable for user to update personal information. </td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/edit-profile.html">UI10</a></td>
	</tr>
    <tr>
		<th>SUBMIT</th>
		<td colspan="2"><a href="#R203-Edit-Profile-Action">R203</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R203: Edit Profile Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that changes user profile info based on the input received. Redirects to the user profile on success and edit profile page on failure. New values can match previous ones, in which case no action is performed for them.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan=3>Request Body</th>
		<td>+name: string</td>
        <td>The user's new name.</td>
	</tr>
    <tr>
		<td>+email: string</td>
        <td>The user's new email.</td>
	</tr>
	<tr>
		<td>+username: string</td>
        <td>The user's new username.</td>
	</tr>
    <tr>
		<th rowspan=3>Returns</th>
		<td>200 OK</td>
        <td>Account information updated successfully.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete or invalid.</td>
	</tr>
	<tr>
		<td>409 Conflict</td>
        <td>Error. There's already an account with the passed email/username different from the current one.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R204: View Profile Picture

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/{username}/photo</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Display the individual user profile picture separated from the other content</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+username:string</td>
        <td>the user (unique) username</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R205: Edit Profile Picture


<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/photo</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that changes user profile picture into a new picture</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan=1>Request Body</th>
		<td>+photo: file</td>
        <td>The user's new profile photograph.</td>
	</tr>
    <tr>
		<th rowspan=2>Returns</th>
		<td>200 OK</td>
        <td>Profile picture updated successfully.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted photo was invalid.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R206: Edit Password Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/user/password</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that displays a form for a user to update the private password.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>AJAX Calls</th>
		<td colspan="2"><a href="#R207-Edit-Password-Action">R207</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R207: API Edit Password Action


<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/api/user/password</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that changes user private password into a new one.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan=2>Request Body</th>
		<td>+old_password: string</td>
        <td>The user's current password.</td>
	</tr>
    <tr>
		<td>+new_password: string</td>
        <td>The user's new password.</td>
	</tr>
    <tr>
		<th rowspan=2>Returns</th>
		<td>200 OK</td>
        <td>Password updated successfully.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete or invalid. Passwords don't match or new password is unsafe</td>
	</tr>
    <tr>
		<th>Response Body</th>
		<td colspan="2"><a href="#JSON201-Edit-Password-Status">JSON201</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

### Module M03: Posts

These are the endpoints available in the Posts Module.

* **R301: Search Post Action** `/post/search`
* **R302: Create Post Form** `/post`
* **R303: Create Post Action** `/post`
* **R304: View Post Action** `/post/{id}`
* **R305: Edit Post Form** `/post/{id}/edit`
* **R306: Edit Post Action** `/post/{id}/edit`
* **R307: Delete Post Action** `/post/{id}`
* **R308: Vote Post Action** `/post/{id}/vote`
* **R309: Delete Vote Post Action** `/post/{id}/vote`

#### R301: Search Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/search</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource searches for posts in the system.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th rowspan=1>Parameters</th>
		<td>?query: string</td>
        <td>Search field for post name/content fpr, for FTS.</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721">UI01</a></td>
	</tr>
    <tr>
		<th>Response Body</th>
		<td colspan="2"><a href="#JSON301-Search-Post-Results-post">JSON301</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R302: Create Post Form 

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to create a new post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/post-add.html">UI13</a></td>
	</tr>
	<tr>
		<th>SUBMIT</th>
		<td colspan="2"><a href="#R303-Create-Post-Action">R303</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R303: Create Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that creates a new post based on input received.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="11">Request Body</th>
		<td>+title:string</td>
        <td>Post title</td>
	</tr>
    <tr>
		<td>+content:string</td>
        <td>Post content</td>
	</tr>
    <tr>
		<td>+school_year:integer</td>
        <td>School year Erasmus took place</td>
	</tr>
    <tr>
		<td>+date:date</td>
        <td>Post creation date</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Post author ID</td>
	</tr>
    <tr>
		<td>+from_faculty_id:integer</td>
        <td>Author home faculty ID</td>
	</tr>
    <tr>
		<td>+to_faculty_id:integer</td>
        <td>Author foreign faculty ID</td>
	</tr>
    <tr>
		<td>+beer_cost:character</td>
        <td>Destination beer cost</td>
	</tr>
    <tr>
		<td>+life_cost:character</td>
        <td>Destination life cost</td>
	</tr>
    <tr>
		<td>+native_friendliness:character</td>
        <td>Destination natives' friendliness</td>
	</tr>
    <tr>
		<td>+work_load:character</td>
        <td>Destination workload</td>
	</tr>
    <tr>
		<th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R304: View Post 

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page to view a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/post-view.html">UI15</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R305: Edit Post Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to edit a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/post-edit.html">UI14</a></td>
	</tr>
	<tr>
		<th>SUBMIT</th>
		<td colspan="2"><a href="#R303-Create-Post-Action-post">R303</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R306: Edit Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource edits a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">PUT</td>
	</tr>
	<tr>
		<th rowspan="10">Request Body</th>
		<td>+title:string</td>
        <td>Post title</td>
	</tr>
    <tr>
		<td>+content:string</td>
        <td>Post content</td>
	</tr>
    <tr>
		<td>+school_year:integer</td>
        <td>School year Erasmus took place</td>
	</tr>
    <tr>
		<td>+date:date</td>
        <td>Post creation date</td>
	</tr>
    <tr>
		<td>+from_faculty_id:integer</td>
        <td>Author home faculty ID</td>
	</tr>
    <tr>
		<td>+to_faculty_id:integer</td>
        <td>Author foreign faculty ID</td>
	</tr>
    <tr>
		<td>+beer_cost:character</td>
        <td>Destination beer cost</td>
	</tr>
    <tr>
		<td>+life_cost:character</td>
        <td>Destination life cost</td>
	</tr>
    <tr>
		<td>+native_friendliness:character</td>
        <td>Destination natives' friendliness</td>
	</tr>
    <tr>
		<td>+work_load:character</td>
        <td>Destination workload</td>
	</tr>
    <tr>
		<th rowspan="2">Redirects</th>
		<td><a href="#R304-View-Post-Action">R304</a></td>
        <td>Success</td>
	</tr>
    <tr>
		<td><a href="#R305-Edit-Post-Form">R305</a></td>
        <td>Error</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R307: Delete Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th rowspan="1">AJAX Calls</th>
		<td colspan="2"><a href="#R608-Homepage-Authenticated-Feed">R608</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R308: Vote Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}/vote</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource gives a vote to a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th rowspan="1">AJAX Calls</th>
		<td colspan="2"><a href="#R608-Homepage-Authenticated-Feed">R608</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R309: Delete Vote Post Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/{id}/vote</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource removes a vote from a post.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th rowspan="1">AJAX Calls</th>
		<td colspan="2"><a href="#R608-Homepage-Authenticated-Feed">R608</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

### Module M04: University and Faculty Administration
These are the endpoints avaiable in the University and Faculty Administration.

* **R401: Add University Form** `/university`
* **R402: Add University Action** `/api/university`
* **R403: Edit University Form** `/university/{id}/edit`
* **R404: Edit University Action** `/api/university/{id}/edit`
* **R405: Delete University** `/university/{id}`
* **R406: Add Faculty Form** `/faculty`
* **R407: Add Faculty Action** `/api/faculty`
* **R408: Edit Faculty Form** `/faculty/{id}/edit`
* **R409: Edit Faculty Action** `/api/faculty/{id}/edit`
* **R410: Delete Faculty Action** `/api/faculty/{id}`
* **R411: Add City Form** `/city`
* **R412: Add City Action** `/api/city`
* **R413: Edit City Form** `/city/{id}/edit`
* **R414: Edit City Action** `/api/city/{id}/edit`
* **R415: Delete City Action** `/api/post/{id}`

#### R401: Create University Form 

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/university</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to create a new university.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-universities.html">UI19</a></td>
	<tr>
		<th>SUBMIT</th>
		<td colspan="2"><a href="#R402-Add-University-Action">R402</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R402: Add University Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/university</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that adds a new university based on input received.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="4">Request Body</th>
		<td>+name:string</td>
        <td>University name</td>
	</tr>
    <tr>
		<td>+description:string</td>
        <td>University description</td>
	</tr>
    <tr>
		<td>+city:string</td>
        <td>City of the University</td>
	</tr>
    <tr>
		<td>+picture:file</td>
        <td>Picture of University</td>
	</tr>
    <tr>
		<th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The university was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The university details were incomplete.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R403: Edit University Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/university/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to edit a university.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-universities.html">UI19</a></td>
	</tr>
	<tr>
		<th>AJAX</th>
		<td colspan="2"><a href="#R404-Edit-University-Action">R404</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R404: Edit University Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/university/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource edits a university.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">PUT</td>
	</tr>
	<tr>
		<th rowspan="4">Request Body</th>
		<td>+name:string</td>
        <td>University name</td>
	</tr>
    <tr>
		<td>+description:string</td>
        <td>University description</td>
	</tr>
    <tr>
		<td>+city:string</td>
        <td>City of the University</td>
	</tr>
    <tr>
		<td>+picture:file</td>
        <td>University Picture</td>
	</tr>
    <tr>
		<th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The university was successfully edited.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The university details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R405: Delete University Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">api/university/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a university.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The university was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The university details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R406: Add Faculty Form 

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/faculty</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to add a new faculty.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-faculties.html?universityId=1">UI21</a></td>
	<tr>
		<th>AJAX</th>
		<td colspan="2"><a href="#R407-Add-Faculty-Action">R407</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R407: Add Faculty Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">api/faculty</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that adds a new faculty based on input received.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="4">Request Body</th>
		<td>+name:string</td>
        <td>Faculty name</td>
	</tr>
    <tr>
		<td>+description:string</td>
        <td>Faculty description</td>
	</tr>
    <tr>
		<td>+city:string</td>
        <td>Name of the Faculty</td>
	</tr>
    <tr>
		<td>+picture:file</td>
        <td>Picture of Faculty</td>
	</tr>
    <tr>
		<th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The faculty was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The faculty details were incomplete.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R408: Edit Faculty Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/faculty/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to edit a faculty.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-faculties.html?universityId=1">UI21</a></td>
	</tr>
	<tr>
		<th>AJAX</th>
		<td colspan="2"><a href="#R409-Edit-Faculty-Action">R409</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R409: Edit Faculty Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/api/faculty/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource edits a faculty.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">PUT</td>
	</tr>
	<tr>
		<th rowspan="4">Request Body</th>
		<td>+name:string</td>
        <td>Faculty name</td>
	</tr>
    <tr>
		<td>+description:string</td>
        <td>Faculty description</td>
	</tr>
    <tr>
		<td>+city:string</td>
        <td>City of the University</td>
	</tr>
    <tr>
		<td>+picture:file</td>
        <td>Faculty Picture</td>
	</tr>
    <th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The faculty was successfully edited.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The faculty details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R410: Delete University Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/university/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a university.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The faculty was successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The faculty details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R411: Add City Form 

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/city</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to add a new city.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>AJAX</th>
		<td colspan="2"><a href="#R412-Add-City-Action">R412</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R412: Add City Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/api/city</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that adds a new city based on input received.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th >Request Body</th>
		<td>+name:string</td>
        <td>City name</td>
	</tr>
    <tr>
		<th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The city was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The city details were incomplete.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R413: Edit City Form

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/city/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Page with a form to edit a city.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>City primary key.</td>
	</tr>
	<tr>
		<th>AJAX</th>
		<td colspan="2"><a href="#R414-Edit-City-Action">R414</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R414: Edit City Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">api/city/{id}/edit</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource edits a city.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">PUT</td>
	</tr>
	<tr>
		<th rowspan="1">Request Body</th>
		<td>+name:string</td>
        <td>City name</td>
	</tr>
    <th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The city was successfully edited.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The city details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R415: Delete City Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">api/city/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a city.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
    <tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>Post primary key.</td>
	</tr>
    <th rowspan="2">Returns</th>
		<td>200 OK</td>
        <td>The city was successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The city details were incomplete.</td>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>



### Module M05: User Administration
These are the endpoints available in the user administration module

* **R501: Show All Users** `/admin/users`
* **R502: Show User** `/admin/users/{id}`
* **R503: Block User** `/admin/users/{id}/block`
* **R504: Unblock User** `/admin/users/{id}/unblock`
* **R505: Delete Posts** `/admin/users/{id}/posts`
* **R506: Delete Comments** `/admin/users/{id}/comments`
* **R507: Delete Avatar** `/admin/users/{id}/avatar`

#### R501: Show All Users

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get all registered users.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>UI</th>
		<td><a href="https://msramalho.github.io/lbaw1721/manage-users.html">UI16</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td>ADM</td>
	</tr>
</table>

#### R502: Show User

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get a specific registered user.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-users.html">UI16</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R503: Block User

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}/block</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Block a specific registered user.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The user was successfully blocked.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. Failed to block user.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No user with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R504: Unblock User

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}/unblock</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Unblock a specific registered user.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The user was successfully unblocked.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. Failed to unblock user.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No user with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R505: Delete Posts

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}/posts</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Delete posts from a specific registered user.</td>
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The user posts were successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. Failed to delete user posts.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No user with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R506: Delete Comments

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}/comments</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Delete comments from a specific registered user.</td>
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The user comments were successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. Failed to delete user comments.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No user with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R507: Delete Avatar

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/admin/users/{id}/avatar</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Delete avatar from a specific registered user.</td>
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th>Parameters</th>
		<td>+id: integer</td>
        <td>User primary key.</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The user avatar was successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. Failed to delete user avatar.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No user with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>


### Module M06: Static Pages
These are the endpoints available in the static pages module


* **R601: About** `/about`
* **R602: Contacts** `/contacts`
* **R603: Statistics** `/statistics`
* **R604: FAQ** `/faq`
* **R605: 404** `/404`
* **R606: 403** `/403`
* **R607: Homepage** `/`
* **R608: Homepage Authenticated (Feed)** `/`


#### R601: About
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/about</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the about page</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/about.html">UI02</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R602: Contacts
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/contacts</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the contacts page</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/contacts.html">UI04</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R603: Statistics
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/statistics</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the website statistics page</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/statistics.html">UI05</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R604: FAQ
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/faq</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the frequently asked questions page</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/faq.html">UI03</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R605: 404
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/404</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the 404 page to display upon resources not found</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R606: 403
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/403</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the 403 page to display upon lack of permission to access a resource</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>

#### R607: Homepage
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the homepage with all the immediate relevant information</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/">UI01</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">PUB</td>
	</tr>
</table>


#### R608: Homepage Authenticated (Feed)
<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Get the feed homepage for a given user. </td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">GET</td>
	</tr>
	<tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/index-authenticated.html">UI11</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>






### Module M07: Comments

These are the endpoints available in the Posts Module.

* **R701: Create Comment Action** `/post/comment`
* **R702: Edit Comment Action** `/post/comment{id}`
* **R703: Delete Comment Action** `/post/comment{id}`

#### R701: Create Comment Action
 <table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/comment</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that creates a new comment based on input received.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="3">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>+comment:string</td>
        <td>Comment content</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post with the specified primary key exists.
</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R702: Edit Comment Action
 <table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/comment{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource edits a comment.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">PUT</td>
	</tr>
	<tr>
		<th rowspan="4">Request Body</th>
		<td>?user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>?post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>?comment_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>?comment:string</td>
        <td>Comment content</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully edited.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post or comment with the specified primary key exists.</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

#### R703: Delete Comment Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/post/comment{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a comment.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th rowspan="3">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>+comment_id:integer</td>
        <td>Comment id</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully deleted.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post or comment with the specified primary key exists.
</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">OWN</td>
	</tr>
</table>

### Module M08: Flags

These are the endpoints available in the Posts Module.

* **R801: Create User Flag Action** `/flag/user`
* **R802: Archive User Flag Action** `/flag/user/{id}`
* **R803: Delete User Flag Action** `/flag/user/{id}`
* **R804: Create Comment Flag Action** `/flag/comment`
* **R805: Archive Comment Flag Action** `/flag/comment/{id}`
* **R806: Delete Comment Flag Action** `/flag/comment/{id}`
* **R807: Create Post Flag Action** `/flag/post`
* **R808: Archive Post Flag Action** `/flag/post/{id}`
* **R809: Delete Post Flag Action** `/flag/post/{id}`


#### R801: Create User Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/user</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that creates a user flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post with the specified primary key exists.
</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R802: Archive User Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/user/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource archives a user flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R803: Delete User Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/user/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a user flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R804: Create Comment Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/comment</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that creates a comment flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+c_id:integer</td>
        <td>Comment id</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post with the specified primary key exists.
</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R805: Archive Comment Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/comment/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource archives a comment flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+c_id:integer</td>
        <td>Comment id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R806: Delete Comment Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/comment/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a comment flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+c_id:integer</td>
        <td>Comment id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R807: Create Post Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/post</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">Web resource that creates a post flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+user_id:integer</td>
        <td>User id</td>
	</tr>
    <tr>
		<td>+post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<th rowspan="3">Returns</th>
		<td>200 OK</td>
        <td>The comment was successfully added.</td>
	</tr>
    <tr>
		<td>400 Bad Request</td>
        <td>Error. The posted details were incomplete.</td>
	</tr>
    <tr>
		<td>404 Not Found</td>
        <td>Error. No post with the specified primary key exists.
</td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">USR</td>
	</tr>
</table>

#### R808: Archive Post Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/post/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource archives a post flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">POST</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

#### R809: Delete Post Flag Action

<table>
	<tr>
		<th>URL</th>
		<td colspan="2">/flag/post/{id}</td>
	</tr>
    <tr>
		<th>Description</th>
		<td colspan="2">This web resource deletes a post flag.</td>   
	</tr>
	<tr>
		<th>Method</th>
		<td colspan="2">DELETE</td>
	</tr>
	<tr>
		<th rowspan="2">Request Body</th>
		<td>+post_id:integer</td>
        <td>Post id</td>
	</tr>
    <tr>
		<td>+author_id:integer</td>
        <td>Flag author id</td>
	</tr>
    <tr>
		<th>UI</th>
		<td colspan="2"><a href="https://msramalho.github.io/lbaw1721/manage-flags.html">UI17</a></td>
	</tr>
    <tr>
		<th>Permissions</th>
		<td colspan="2">ADM</td>
	</tr>
</table>

 
## 4. JSON/XML Types

### JSON101: Login Status


 ```JSON
{
  "success": false,
  "reason": "Invalid password or username/email. Please resubmit"
}
 ``` 
 
### JSON102: Register Status


 ```JSON
{
  "success": false,
  "reason": "The selected email is already in use. Please use another one."
}
 ```
 
 
### JSON201: Edit Password Status


 ```JSON
{
  "success": false,
  "reason": "Current password is invalid."
}
 ```
 
 ```JSON
{
  "success": false,
  "reason": "Password is not secure enough."
}
 ```
 
 
 ```JSON
{
  "success": false,
  "reason": "New password and confirmation passwords don't match. "
}
 ```


 
### JSON301: Search Post Results: {post}[]


 ```JSON
{
    "posts": [{
        "id": "1",
        "title": "My way to Belgium and back",
        "votes": "10",
        "content": "This is all the content....End",
        "school_year": "3",
        "date": "2017-03-04 15:00:07",
        "removed_reason": "",
        "removed_date": "NULL",
        "author_id": "13",
        "from_faculty_id": "20",
        "to_faculty_id": "23",
        "beer_cost": "Cheap",
        "life_cost": "Accessible",
        "native_friendliness": "Very good",
        "work_load character": "Over 9000!"
    },{
        "id": "2",
        "title": "Why Belgium is so cool",
        "votes": "15",
        "content": "This is all the content....End of content",
        "school_year": "4",
        "date": "2018-04-04 08:30:20",
        "removed_reason": "",
        "removed_date": "NULL",
        "author_id": "14",
        "from_faculty_id": "18",
        "to_faculty_id": "23",
        "beer_cost": "Cheap",
        "life_cost": "Expensive",
        "native_friendliness": "Good",
        "work_load character": "Over 9000!"
    }]
}
 ```
 
## Revision history
 
1. Initial submission on 11/04/2018
2. Resubmission on 18/04/2018
    1. On **Module 1**
        * **R101: Login Action, R102: Register Action**: Changed from *Ajax call* to Submit
        * **R103: Logout Action**: Fixed Logout redirect
    3. On **Module 2**
        * **R205: Edit Profile Picture**: Corrected Edit Profile Picture URL from `/user/edit` to `/user/photo`
        * **R206: Edit Password Form:** Replaced **Submit** with **Ajax Call**
        * **R207: API Edit Password Action:** Removed password check.
    5. On **Module 3**:
        * **R304: View Post**: corrected title from **View Post Action** to **View Post**
        * **R306: Edit Post Action**: Changed **?** to **+**. Parameters are mandatory.
        * **R307, R308, R309**: Added **Ajax** Calls.
    6. On **Module 4**:
        * Replaced **Submit** with **Ajax Call**

#### GROUP1721, 11/04/2018

>Afonso Ramos - up201506239@fe.up.pt
Daniel Silva - up201503212@fe.up.pt
Miguel Ramalho - up201403027@fe.up.pt
Vitor Minhoto - up201303086@fe.up.pt